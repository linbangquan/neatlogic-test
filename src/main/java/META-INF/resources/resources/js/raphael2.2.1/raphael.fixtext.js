(function(d){d&&d.el&&!d.el.fitText&&(d.el.fitText=function(c,b){if(this.removed||"text"!==this.type)return this;"number"!==typeof c&&(c=this.paper.width);"string"===typeof b?this.attr("text",b):b=this.attr("text");var a=this.getBBox().width;if(a>c){a=Math.round(c/(a/b.length));a=b.substr(0,a-3);for(this.attr({text:a+"...",title:b});this.getBBox().width>c&&0<a.length;)a=a.slice(0,-1),this.attr("text",a+"...")}else this.attr("title","");return this})})(Raphael);
